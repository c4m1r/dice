// Гадальные таблицы и интерпретации

// Гадание на одной кости (4 броска чёт/нечёт)
export const oneDieDivination: Record<string, string> = {
  'XXXX': 'Полная гармония. Ваши планы идеально согласованы с окружающим миром. Время действовать с уверенностью.',
  'XXXO': 'Почти идеальный баланс. Небольшое препятствие на пути, но успех неизбежен при настойчивости.',
  'XXOX': 'Стабильность с элементом неожиданности. Готовьтесь к приятному сюрпризу в середине пути.',
  'XXOO': 'Равновесие сил. Ситуация требует терпения - не спешите с решениями.',
  'XOXX': 'Временные трудности в начале. Не сдавайтесь - впереди ждёт успех.',
  'XOXO': 'Череда взлётов и падений. Примите изменчивость как часть жизни.',
  'XOOX': 'Скрытые возможности. То, что кажется препятствием, может стать преимуществом.',
  'XOOO': 'Сопротивление среды. Пересмотрите свой подход - возможно, стоит выбрать другой путь.',
  'OXXX': 'Неожиданное начало приведёт к стабильному результату. Доверьтесь интуиции.',
  'OXXO': 'Контрасты и противоречия. Ищите золотую середину между крайностями.',
  'OXOX': 'Динамичные изменения. Будьте готовы к быстрым переменам и адаптируйтесь.',
  'OXOO': 'Начальная неопределённость сменится ясностью. Подождите - ответы придут.',
  'OOXX': 'Туман рассеивается. После периода неясности наступает понимание.',
  'OOXO': 'Сложный паттерн событий. Анализируйте каждый шаг внимательно.',
  'OOOX': 'Долгое ожидание увенчается успехом. Терпение - ваш главный союзник.',
  'OOOO': 'Время глубоких размышлений. Не действуйте сгоряча - сначала найдите внутреннюю гармонию.'
};

// Гадание на двух костях (сумма 2-12)
export const twoDiceDivination: Record<number, string> = {
  2: 'Новые начинания. Чистый лист, возможность начать с нуля. Минимальные усилия принесут максимальный результат.',
  3: 'Творческий импульс. Ваши идеи найдут воплощение. Время для самовыражения и креатива.',
  4: 'Стабильность и порядок. Надёжный фундамент под ногами. Планомерно двигайтесь к цели.',
  5: 'Изменения и движение. Жизнь входит в активную фазу. Будьте открыты новому опыту.',
  6: 'Гармония и равновесие. Все аспекты жизни находятся в балансе. Наслаждайтесь моментом.',
  7: 'Счастливое число. Удача сопутствует вашим начинаниям. Рискуйте разумно.',
  8: 'Материальные достижения. Успех в делах и финансах. Ваши усилия окупятся.',
  9: 'Завершение цикла. Пора подводить итоги и готовиться к новому этапу.',
  10: 'Полнота и совершенство. Ваши таланты раскрыты полностью. Делитесь опытом с другими.',
  11: 'Мастерское число. Высокая интуиция и духовное прозрение. Слушайте внутренний голос.',
  12: 'Высшее достижение. Пик развития в выбранном направлении. Время ставить новые цели.'
};

// Гадание на трёх костях (сумма 3-18)
export const threeDiceDivination: Record<number, string> = {
  3: 'Тройная сила начала. Мощный импульс для новых проектов. Вселенная поддерживает ваши инициативы.',
  4: 'Прочный фундамент. Четыре стороны света указывают верное направление. Доверьтесь своей интуиции.',
  5: 'Пять элементов в гармонии. Баланс между материальным и духовным. Время для саморазвития.',
  6: 'Совершенное равновесие. Красота, гармония, любовь наполняют вашу жизнь. Делитесь радостью.',
  7: 'Мистическое число. Тайные знания открываются перед вами. Углубляйтесь в изучение себя.',
  8: 'Бесконечность возможностей. Материальный успех идёт рука об руку с духовным ростом.',
  9: 'Тройное совершенство. Завершение важного жизненного этапа. Готовьтесь к трансформации.',
  10: 'Колесо фортуны в движении. Переменные успехи и неудачи. Оставайтесь в центре событий.',
  11: 'Двойное мастерское число. Высочайшая интуиция. Вы способны видеть скрытые связи.',
  12: 'Космический порядок. Двенадцать - число времени и пространства. Всё происходит в нужный момент.',
  13: 'Трансформация и обновление. Смерть старого и рождение нового. Не бойтесь перемен.',
  14: 'Умеренность и баланс. Находите золотую середину во всех делах. Избегайте крайностей.',
  15: 'Материальные соблазны. Не позволяйте богатству затмить духовные ценности.',
  16: 'Разрушение иллюзий. Истина может быть болезненной, но необходимой для роста.',
  17: 'Звёздная надежда. После тьмы приходит свет. Ваши мечты осуществимы.',
  18: 'Лунная интуиция. Подсознательные процессы выходят на поверхность. Время медитации.'
};

export const interpretOneDie = (results: number[]): string => {
  const pattern = results
    .map(value => value % 2 === 0 ? 'X' : 'O')
    .join('');
  
  return oneDieDivination[pattern] || 'Неизвестный паттерн. Доверьтесь своей интуиции в интерпретации.';
};

export const interpretTwoDice = (sum: number): string => {
  return twoDiceDivination[sum] || 'Сумма выходит за пределы стандартной интерпретации.';
};

export const interpretThreeDice = (sum: number): string => {
  return threeDiceDivination[sum] || 'Сумма выходит за пределы стандартной интерпретации.';
};

export const performDivination = (mode: string, results: number[]): string => {
  switch (mode) {
    case 'one-die':
      return interpretOneDie(results);
    case 'two-dice':
      const twoSum = results.reduce((sum, val) => sum + val, 0);
      return interpretTwoDice(twoSum);
    case 'three-dice':
      const threeSum = results.reduce((sum, val) => sum + val, 0);
      return interpretThreeDice(threeSum);
    default:
      return 'Неизвестный режим гадания.';
  }
};
